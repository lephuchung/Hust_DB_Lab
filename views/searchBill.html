<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/png" href="./assets/img/logo.png"/>
    <link rel="stylesheet" href="./assets/fonts/themify-icons/themify-icons.css">
    <link rel="stylesheet" href="./assets/css/preset.css">
    <link rel="stylesheet" href="./assets/css/base.css">
    <link rel="stylesheet" href="./assets/css/main.css">
    <link rel="stylesheet" href="./assets/css/home.css">
    <link rel="stylesheet" href="./assets/css/layout1.css">
    <link rel="stylesheet" href="./assets/css/layout1Search.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap&subset=vietnamese" rel="stylesheet">
    <title>Search Bill</title>
    <!-- - them jquery --->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <style>
      /* Định dạng bảng */
      table {
        border-collapse: collapse;
        width: 100%;
        margin: 0 auto; /* Căn giữa bảng */
        overflow-x: auto;
      }
  
      /* Định dạng hàng đầu tiên (tiêu đề cột) */
      thead th {
        background-color: #33b0b9;
        font-weight: bold;
        padding: 12px; /* Tăng kích thước padding */
        text-align: left;
      }
  
      /* Định dạng các ô dữ liệu */
      tbody td {
        border: 1px solid #ddd;
        padding: 12px; /* Tăng kích thước padding */
        background-color: #ffffff74;
      }
  
      /* Định dạng các ô dữ liệu đặc biệt (ví dụ: cột đầu tiên) */
      tbody td:first-child {
        font-weight: bold;
      }
    </style>
</head>
<body>
  <div class="header">
    <ul class="header__navleft">
      <li class="header__listItem"><a class="header__link" href="home.html"><img class="header__logo" src="./assets/img/Rent Car Taxi Cab Logo.png" alt="logo"></a></li>
      <li class="header__listItem"><a class="header__link" href="home.html">Trang Chủ</a></li>
      <li class="header__listItem"><a class="header__link" href="service.html">Chăm Sóc Khách Hàng</a></li>
      <li class="header__listItem">
        <a id="chucnang" class="header__link" href="home.html">Chức năng &nbsp<i class="ti-angle-down"></i> </a>
        <i class="ti-angle-down"></i>
        <ul class="header__subnav">
          <li class="header__subListItem">
            <a class="header__linkSubnav" href="manageEmployee.html">Quản lý nhân viên</a>
            <ul class="header__subSubnav">
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="listEmployee.html">Danh sách nhân viên</a></li>
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="addEmployee.html">Thêm thông tin nhân viên</a></li>
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="updateEmployee.html">Sửa thông tin nhân viên</a></li>
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="removeEmployee.html">Xóa thông tin nhân viên</a></li>
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="searchEmployee.html">Tìm kiếm nhân viên</a></li>
            </ul>
          </li>
          <li class="header__subListItem">
            <a class="header__linkSubnav" href="manageCustomer.html">Quản lý khách hàng</a>
            <ul class="header__subSubnav">
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="addCustomer.html">Thêm thông tin khách hàng</a></li>
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="updateCustomer.html">Sửa thông tin khách hàng</a></li>
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="removeCustomer.html">Xóa thông tin khách hàng</a></li>
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="searchCustomerByName.html">Lọc tìm kiếm khách hàng theo tên</a></li>
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="searchCustomerByPN.html">Lọc tìm kiếm khách hàng theo sdt</a></li>
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="searchCustomerByEmail.html">Lọc tìm kiếm khách hàng theo email</a></li>
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="customerHistory.html">Xem lịch sử thuê xe của khách hàng</a></li>
            </ul>
          </li>
          <li class="header__subListItem">
            <a class="header__linkSubnav" href="manageRentCar.html">Quản lý thuê xe</a>
            <ul class="header__subSubnav">
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="addRentCar.html">Thêm thông tin đặt xe</a></li>
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="updateRentCar.html">Chỉnh sửa thông tin đặt xe</a></li>
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="removeRentCar.html">Xóa thông tin đặt xe</a></li>
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="searchRentCar.html">Tìm thông tin đặt xe</a></li>
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="updateBill.html">Cập nhật hóa đơn</a></li>
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="searchBill.html">Thông tin hóa đơn khách hàng</a></li>
            </ul>
          </li>
          <li class="header__subListItem">
            <a class="header__linkSubnav" href="manageCar.html">Quản lý xe</a>
            <ul class="header__subSubnav">
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="addCar.html">Thêm thông tin xe</a></li>
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="updateCar.html">Sửa thông tin xe</a></li>
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="searchCar.html">Tìm kiếm xe</a></li>
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="carType.html">Hiển thị thông báo các loại xe</a></li>
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="carMaintenance.html">Bảo dưỡng xe</a></li>
            </ul>
          </li>
          <li class="header__subListItem">
            <a class="header__linkSubnav" href="report.html">Báo cáo</a>
            <ul class="header__subSubnav">
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="monthReport.html">Báo cáo doanh thu các tháng</a></li>
              <li class="header__listItemSubSubnav"><a class="header__linkSubSubnav" href="popularCar.html">Loại xe phổ biến </a></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
    <ul class="header__navright">
      <li class="header__listItem"><a class="header__link" href="signin.html">Đăng Xuất</a></li>
      <li class="header__listItem"><a class="header__link" href="help.html">Hỗ Trợ</a></li>
    </ul>
</div>

    <div class="content">
      <div class="content__sidebar">
        <p class="content__sidebarHeading">Chức năng</p>
        <ul class="content__sidebarList">
          <li class="content__sidebarItem"><a class="content__sidebarFunction" href="manageRentCar.html">Quản lý thuê xe</a></li>
          <li class="content__sidebarItem">
            <ul class="content__sidebarSubList">
              <li class="content__sidebarSubItem"><a class="content__sidebarLink" href="addRentCar.html">Thêm thông tin đặt xe</a></li>
              <li class="content__sidebarSubItem"><a class="content__sidebarLink" href="searchRentCar.html">Tìm thông tin đặt xe</a></li>
              <li class="content__sidebarSubItem"><a class="content__sidebarLink" href="updateRentCar.html">Chỉnh sửa thông tin đặt xe</a></li>
              <li class="content__sidebarSubItem"><a class="content__sidebarLink" href="removeRentCar.html">Xóa thông tin đặt xe</a></li>
              <li class="content__sidebarSubItem"><a class="content__sidebarLink" href="updateBill.html">Cập nhật hóa đơn</a></li>
              <li class="content__sidebarSubItem"><a class="content__sidebarLink" href="searchBill.html">Thông tin hóa đơn</a></li>
            </ul>
          </li>
        </ul>
        <p id="ct__sbback"><a class="ct__sbbackLink" href="home.html"><i class="ti-angle-left" style="font-size: 1.8rem;"></i>&nbspQuay lại</a></p>
      </div>
      <div class="content__main">
        <div class="content__layout1">
          <div class="content__layout1p1">
            <form class="content__layout1p1SearchForm" action="#" method="get">
                <input class="content__layout1p1SearchArea" id="BillIDInput" type="text" placeholder="Nhập mã hóa đơn (mã hóa đơn có dạng MHD000000000)">
                <input class="content__layout1p1BtnSubmit" type="button" value="Tìm kiếm" onclick="searchBillsbyCode()">
            </form>
        </div>
        
        <div class="content__layout1p2">
            <table id="billTable" class="hidden">
                <thead>
                    <tr>
                        <th>Mã hóa đơn</th>
                        <th>Mã thuê</th>
                        <th>Mã khách hàng</th>
                        <th>Tiền thanh toán</th>
                        <th>Phương thức thanh toán</th>
                        <th>Ngày thanh toán</th>
                    </tr>
                </thead>
                <tbody id="billTableBody"></tbody>
            </table>
        
            <!-- Định nghĩa các style cho bảng và thông báo -->
            <style>
                .hidden {
                    display: none;
                }
        
                .no-match-message {
                    color: red;
                    font-size: 24px;
                    font-weight: bold;
                    overflow-x: 12px;
                    padding-top: 10px;
                    padding-right: 20px;
                    text-align: center;
                }
        
                .blank-message {
                    color: red;
                    font-size: 24px;
                    font-weight: bold;
                    overflow-x: 12px;
                    padding-top: 10px;
                    padding-right: 20px;
                    text-align: center;
                }
            </style>
        
            <p id="noMatchMessage" class="no-match-message" style="display: none;">Không có hóa đơn khớp với mã bạn nhập</p>
            <p id="blankmessage" class="blank-message" style="display: none;">Không được để trống ô tìm kiếm</p>
            <script>
              //Khai bao ham chuyen format ngay thang
              function formatDate(dateString) {
  const options = { year: 'numeric', month: 'numeric', day: 'numeric' };
  const date = new Date(dateString);
  return date.toLocaleDateString('vi-VN', options);
}
            </script>
            <script>
                function searchBillsbyCode() {
                    const BillID = document.getElementById('BillIDInput').value;
        
                    // Gửi yêu cầu truy vấn với mã hóa đơn đã nhập
                    fetch(`/timhoadon?BillID=${BillID}`)
                        .then(response => response.json())
                        .then(bills => {
                            const noMatchMessage = document.getElementById('noMatchMessage');
                            const billTable = document.getElementById('billTable');
                            const billTableBody = document.getElementById('billTableBody');
        
                            // Xóa các hàng cũ trong bảng
                            while (billTableBody.firstChild) {
                                billTableBody.removeChild(billTableBody.firstChild);
                            }
        
                            if (bills.length === 0) {
                                // Không có hóa đơn khớp, hiển thị thông báo và ẩn bảng
                                noMatchMessage.style.display = 'block';
                                billTable.style.display = 'none';
                                blankmessage.style.display = 'none';
                            } else if (BillID === '') {
                                blankmessage.style.display = 'block';
                                billTable.style.display = 'none';
                                noMatchMessage.style.display = 'none';
                            } else {
                                // Có hóa đơn khớp, ẩn thông báo và hiển thị bảng
                                noMatchMessage.style.display = 'none';
                                billTable.style.display = 'table';
                                blankmessage.style.display = 'none';
                                bills.forEach(bill => {
                                    // Thêm dữ liệu mới vào bảng
                                    const row = billTableBody.insertRow();
                                    row.insertCell().textContent = bill.MaHoaDon;
                                    row.insertCell().textContent = bill.MaThue;
                                    row.insertCell().textContent = bill.MaKhachHang;
                                    row.insertCell().textContent = bill.TienThanhToan;
                                    row.insertCell().textContent = bill.PhuongThucThanhToan;
                                    row.insertCell().textContent = formatDate(bill.NgayThanhToan);
                                });
                            }
                        })
                        .catch(error => {
                            console.log('Error searching bills:', error);
                        });
                }
            </script>
        </div>                      
            </div>
        </div>
      </div>
  </div>
  

  <div id="footer">
    <div class="footer">
          <footer class="footer">
              <div class="footer__p1">
                <p class="footer--h1">Công ty cho thuê xe Takehiro</p>
                <div class="footer--h2"> <i class="ti-location-pin"></i>
                  <a class="footer__link" href="https://goo.gl/maps/GX8fSM2AWNVL1nPk6"> Số 10 Giải Phóng, Hai Bà Trưng, Hà Nội</a>   
                  <div class="map-box"><img class="maps" src="./assets/img/AddressCpn.png" alt=""> </div>
                </div>
                <div class="clear"></div>
                <p class="footer--h2"> 
                  <i class="ti-file"></i> GPKD số 0312345678 cấp bởi Sở Kế hoạch và Đầu tư Thành Phố Hà Nội ngày 07/06/2010
                </p>
                <p class="footer--h2"><i class="fal fa-phone fa-rotate-90" style="color: #c4def6;"></i> <i class="ti-mobile"></i> Điện thoại: 1800 1008 - 0971234567</p>
                <p class="footer--h2"><i class="ti-email"></i> Email liên hệ: Takehiro@busi.vn</p>
              </div>
              <div class="footer__p2">
                <p class="footer--h1">Kết nối với Takehiro</p>
                <ul class="footer--h15">
                  <li class="footer__p2ListItem"><a href="" class="footer--h2"><i class="ti-facebook"> </i> Facebook</a></li>
                  <li class="footer__p2ListItem"><a href="" class="footer--h2"><i class="ti-twitter"> </i> Twitter</a></li>
                  <li class="footer__p2ListItem"><a href="" class="footer--h2"><i class="ti-youtube"> </i> Youtube</a></li>
                  <li class="footer__p2ListItem"><a href="" class="footer--h2"><i class="ti-instagram"> </i> Instagram</a></li>
                </ul>
              </div>
              <div class="footer__p3">
                <img class="footer__p3logo" src="./assets/img/logobocongthuong.png" alt="đã thông báo với bộ công thương">
                <img class="footer__p3logo" src="./assets/img/dmca-logo.png" alt="">
              </div>
          </footer>
    </div>
    <div class="footer2">
        <footer class="footer">
          <div class="footer__logo">
            <img class="footer__logoImg" src="./assets/img/logo.png" alt="logo công ty">
          </div>
          <div class="footer__cpn">
            <p class="footer__name">Takehiro Rent Car</p>
          </div>
          <div class="footer__slogan">Best Service, Right Time, Right People</div>
        </footer>
    </div>
  </div>
</body>
</html>